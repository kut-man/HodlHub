<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/icon.ico" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite + React + TS</title>
  </head>
  <body>
    <script>
      // Override localStorage.setItem to dispatch a custom event for same-tab changes
      var originalSetItem = localStorage.setItem;
      localStorage.setItem = function (key, value) {
        originalSetItem.call(this, key, value);
        if (key === "vite-ui-theme") {
          window.dispatchEvent(
            new CustomEvent("localStorageChange", { detail: { key, value } })
          );
        }
      };

      function updateBackground(theme) {
        document.documentElement.style.backgroundColor =
          theme === "dark" ? "#020817" : "";
      }

      // Initial load
      var initialTheme = localStorage.getItem("vite-ui-theme");
      updateBackground(initialTheme);

      // Listen for same-tab changes
      window.addEventListener("localStorageChange", function (e) {
        if (e.detail.key === "vite-ui-theme") {
          updateBackground(e.detail.value);
        }
      });

      // Listen for cross-tab changes
      window.addEventListener("storage", function (e) {
        if (e.key === "vite-ui-theme") {
          updateBackground(e.newValue);
        }
      });
    </script>
    <div id="root" style="scrollbar-gutter: stable; height: 100vh"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
